<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			*{
				margin: 0;
				padding: 0;
			}
			html,body{
				width: 100%;
				height: 100%;
				overflow: hidden;
				position: relative;
			}
			.back{
				width: 100%;
				height: 100%;
				position: absolute;
			}
			.page{
				width: 100%;
				height: 100%;
				
			}
			.no1{
				background-color: plum; 
			}
			.no2{
				background-color: skyblue; 
			}
			.no3{
				background-color: orange;
			}
			.no4{
				background-color: fuchsia;
			}
		</style>
	</head>
	<body>
		<div class="back">
			<div class="page no1">no1</div>
			<div class="page no2">no2</div>
			<div class="page no3">no3</div>
			<div class="page no4">no4</div>
		</div>
		<script src="../js/jquery-3.2.1.js"></script>
		<script type="text/javascript" src="../js/jquery.mousewheel.js" ></script>
		<script type="text/javascript">
			
			var $back = $(".back");
			
			// 定义一个锁
			var lock = true;
			
			// 定义一个信号量
			var idx = 1;
			
			$(document).mousewheel(function(event,delta){
				
				// 函数节流
				if( !lock ) return;
				
				// 阻止浏览器默认行为
				event.preventDefault();
				
				idx -= delta;
				console.log(idx);
				// 超出范围判断
				if(idx > 4) idx = 4;
				if(idx < 1) idx = 1;
				
				// 锁上锁子
				lock = false;
				
				// 执行动画函数
				$back.animate({"top" : -100 * (idx -1) + "%"},1000,function(){
					
					// 动画执行结束之后，打开锁子
					lock = true;
					
				});
				
			});
			
		</script>
	</body>
</html>
